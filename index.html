<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Photography Pricing Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #ffffff;
      color: #333;
      margin: 0;
      padding: 2rem;
    }
    h1, h2 {
      color: #111;
    }
    input, select, button {
      padding: 0.5rem;
      margin: 0.5rem 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 2rem;
    }
    th, td {
      padding: 0.75rem;
      border: 1px solid #ddd;
      text-align: left;
    }
    .section {
      margin-bottom: 2rem;
    }
  </style>
</head>

<body>
  <h1>Photography Pricing Calculator</h1>

  <div class="section">
    <label for="base-rate">Base Day Rate ($):</label>
    <input type="number" id="base-rate" value="1500">

    <label for="days">Number of Days:</label>
    <input type="number" id="days" value="1">

    <label for="hourly-rate">Hourly Rate ($):</label>
    <input type="number" id="hourly-rate" value="250">
    <input type="number" id="hours" placeholder="# of hours">

    <button onclick="addLineItem('Full Day', parseFloat(document.getElementById('base-rate').value))">Add Full-Day</button>
    <button onclick="addLineItem('Half Day', parseFloat(document.getElementById('base-rate').value) * 0.6)">Add Half-Day</button>
    <button onclick="addLineItem('Hourly', parseFloat(document.getElementById('hourly-rate').value) * parseInt(document.getElementById('hours').value || 1))">Add Hourly</button>
  </div>

  <div class="section">
    <h2>Invoice Info</h2>
    <label>Your Name:</label><input type="text" id="your-name"><br>
    <label>Your Email/Phone:</label><input type="text" id="your-contact"><br>
    <label>Your Address:</label><input type="text" id="your-address"><br>
    <label>Invoice Number:</label><input type="text" id="invoice-number"><br>
    <label>Invoice Date:</label><input type="date" id="invoice-date"><br>
    <label>Client Name:</label><input type="text" id="client-name"><br>
    <label>Client Contact Info:</label><input type="text" id="client-contact"><br>
    <label>Project Title:</label><input type="text" id="project-title"><br>
    <label>Payment Terms:</label>
    <select id="payment-terms">
      <option>Due on receipt</option>
      <option>Net 30</option>
      <option>Net 60</option>
      <option>Net 90</option>
    </select>
  </div>

  <div class="section">
    <h2>Line Items</h2>
    <table id="invoice-table">
      <thead>
        <tr>
          <th>Item</th>
          <th>Qty</th>
          <th>Unit Price</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <h3 id="total">Total: $0.00</h3>
    <button onclick="generatePDF()">Download PDF Estimate</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    let total = 0;
    let docBody = document.querySelector("#invoice-table tbody");

    function addLineItem(name, price) {
      const row = document.createElement("tr");
      row.innerHTML = `<td>${name}</td><td>1</td><td>$${price.toFixed(2)}</td>`;
      docBody.appendChild(row);
      total += price;
      document.getElementById("total").innerText = `Total: $${total.toFixed(2)}`;
    }

    async function generatePDF() {
      const {{ jsPDF }} = window.jspdf;
      const doc = new jsPDF();
      let y = 10;

      doc.setFontSize(12);
      doc.text(`Daniel Pop\nDANPOPSD\n${document.getElementById("your-address").value}`, 10, y);
      doc.text(`Invoice Number: ${document.getElementById("invoice-number").value}`, 150, y, { align: "right" });
      y += 10;
      doc.text(`Invoice Date: ${document.getElementById("invoice-date").value}`, 150, y, { align: "right" });
      y += 20;
      doc.text(`Billed To:\n${document.getElementById("client-name").value}\n${document.getElementById("client-contact").value}`, 10, y);
      y += 30;

      doc.text("Item", 10, y);
      doc.text("Qty", 100, y);
      doc.text("Unit Price", 150, y);
      y += 10;

      [...docBody.children].forEach(row => {
        const cols = row.querySelectorAll("td");
        doc.text(cols[0].innerText, 10, y);
        doc.text(cols[1].innerText, 100, y);
        doc.text(cols[2].innerText, 150, y);
        y += 10;
      });

      doc.text(`\nTotal: $${total.toFixed(2)}`, 10, y + 10);
      doc.text(`Payment Terms: ${document.getElementById("payment-terms").value}`, 10, y + 20);

      doc.save("estimate.pdf");
    }
  </script>
</body>

</html>
